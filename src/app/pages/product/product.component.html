<ion-header>
  <ion-toolbar>
    <ion-title>購買</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-list>
  <ion-item detail="false">
    <ion-label class="ion-text-wrap">
      本地收據的所有交易 localTransactions
      <ng-template [ngIf]="store.localTransactions">
        <p *ngFor="let item of store.localTransactions; index as i">
          {{ i + 1 }} - {{ item | json }}</p>
      </ng-template>
    </ion-label>
  </ion-item>
  <ion-item button *ngFor="let product of products" (click)="purchase(product.id)" detail="false">
      <ion-label class="ion-text-wrap">
        {{ product.title }}
        <p>是否已購買 {{ product.owned }} / 是否可購買 {{ product.canPurchase }}</p>
        <p>{{ product.description }}</p>
      </ion-label>
      <ion-button slot="end">
        {{ product.offers[0].pricingPhases[0].price }} {{ product.offers[0].pricingPhases[0].currency }}
      </ion-button>
    </ion-item>
  </ion-list>
  <ion-button expand="full" (click)="restorePurchases()">重播用戶交易</ion-button>
  <ion-item>
    寶石（消耗品）: {{ gems }}
  </ion-item>
  <ion-item>
    權限開通（非消耗品）: {{ isPro }}
  </ion-item>
  <ion-item>
    自動訂閱次數: {{ subscriptionNum }}
  </ion-item>
</ion-content>
